@model AdminFrontend.ViewModels.TeacherEditViewModel

<h2>@ViewBag.Title</h2>

<div id="teacher-edit-table">
    <table>
        <tr>
            <td>Логин</td>
            <td>@Html.TextBoxFor(m => m.Login, new { data_bind = "value: Login" })</td>
        </tr>
        <tr>
            <td>Пароль</td>
            <td>@Html.PasswordFor(m => m.Password, new { data_bind = "value: Password" })</td>
        </tr>
    </table>
    <button class="rcp-button rcp-button-min" id="btn-submit">Сохранить</button>
</div>

<script type="text/javascript">
    var viewModel = {
        Id: ko.observable(@Model.Id),
        Login: ko.observable('@Model.Login'),
        Password: ko.observable('@Model.Password')
    };
    $('#btn-submit').click(function () {
        var data = ko.mapping.toJS(viewModel);
        Fader.show();
        $.post(
            '@Url.Action("Save", "Teachers")',
            data,
            function (result) {
                Fader.hide();
                if (result.success) {
                    window.location.replace(result.returnTo);
                } else {
                    alert(result.msg);
                }
            }
        );
    });

    ko.applyBindings(viewModel, $('teacher-edit-table')[0]);
</script>